{# app/templates/cabinet.html #}
{% extends "base.html" %}

{% block title %}Личный кабинет — {{ APP_TITLE }}{% endblock %}

{% block content %}
  <div class="row space-between">
    <div>
      <h1 class="card__title" style="margin:0;">Личный кабинет</h1>
      <p class="card__subtitle" style="margin:6px 0 0;">
        Краткая карточка профиля и роль в системе.
      </p>
    </div>
    <div class="row">
      <a class="btn" href="{{ url_for('routes.index') }}">На главную</a>
    </div>
  </div>

  <div class="card mt-16">
    <div class="card__body">
      <h2 class="card__title">Профиль</h2>
      <table class="table mt-12">
        <tbody>
          <tr>
            <th>Логин</th>
            <td><b>{{ current_user.username }}</b></td>
          </tr>
          <tr>
            <th>Роль</th>
            <td>{{ role_title }}</td>
          </tr>
          <tr>
            <th>Email</th>
            <td>{{ current_user.email or "—" }}</td>
          </tr>
          <tr>
            <th>Статус</th>
            <td>
              {% if current_user.is_active %}
                <span class="badge badge--ok">Активен</span>
              {% else %}
                <span class="badge badge--warn">Неактивен</span>
              {% endif %}
            </td>
          </tr>
          {% if team_label %}
            <tr>
              <th>Команда</th>
              <td>{{ team_label }}</td>
            </tr>
          {% endif %}
          <tr>
            <th>Последний вход</th>
            <td>{{ current_user.last_login_at.strftime('%Y-%m-%d %H:%M') if current_user.last_login_at else "—" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
